var teams = [
    {
        "team" : "New York Giants",
        "logo" : "https://pbs.twimg.com/profile_images/905506936363339781/FwLc7lol.jpg"
    },
    {
        "team" : "New York Jets",
        "logo" : "https://pbs.twimg.com/profile_images/798337196424101888/nt0g8k41.jpg"
    },
    {
        "team" : "New England Patriots",
        "logo" : "http://cdn.bleacherreport.net/images/team_logos/328x328/new_england_patriots.png"
    },
    {
        "team" : "Buffalo Bills",
        "logo" : "http://prod.static.bills.clubs.nfl.com/nfl-assets/img/gbl-ico-team/BUF/logos/home/large.png"
    },
    {
        "team" : "Philadelphia Eagles",
        "logo" : "http://prod.static.eagles.clubs.nfl.com/nfl-assets/img/gbl-ico-team/PHI/logos/home/large.png"
    },
    {
        "team" : "Pittsburgh Steelers",
        "logo" : "http://prod.static.steelers.clubs.nfl.com/nfl-assets/img/gbl-ico-team/PIT/logos/home/large.png"
    },
    {
        "team" : "Washington Redskins",
        "logo" : "http://prod.static.redskins.clubs.nfl.com/nfl-assets/img/gbl-ico-team/WAS/logos/home/large.png"
    },
    {
        "team" : "Baltimore Ravens",
        "logo" : "http://prod.static.ravens.clubs.nfl.com/nfl-assets/img/gbl-ico-team/BAL/logos/home/large.png"
    },
    {
        "team" : "Miami Dolphins",
        "logo" : "http://cdn.bleacherreport.net/images/team_logos/328x328/miami_dolphins.png"
    },
    {
        "team" : "Tampa Bay Buccaneers",
        "logo" : "http://prod.static.buccaneers.clubs.nfl.com/nfl-assets/img/gbl-ico-team/TB/logos/home/large.png"
    },
    {
        "team" : "Cincinnati Bengals",
        "logo" : "http://prod.static.bengals.clubs.nfl.com/nfl-assets/img/gbl-ico-team/CIN/logos/home/large.png"
    },
    {
        "team" : "Cleveland Browns",
        "logo" : "http://prod.static.browns.clubs.nfl.com/nfl-assets/img/gbl-ico-team/CLE/logos/home/large.png"
    },
    {
        "team" : "Jacksonville Jaguars",
        "logo" : "http://prod.static.jaguars.clubs.nfl.com/nfl-assets/img/gbl-ico-team/JAX/logos/home/large.png"
    },
    {
        "team" : "Atlanta Falcons",
        "logo" : "http://prod.static.falcons.clubs.nfl.com/nfl-assets/img/gbl-ico-team/ATL/logos/home/large.png"
    },
    {
        "team" : "Carolina Panthers",
        "logo" : "http://prod.static.panthers.clubs.nfl.com/nfl-assets/img/gbl-ico-team/CAR/logos/home/large.png"
    },
    {
        "team" : "Tennessee Titans",
        "logo" : "https://pbs.twimg.com/profile_images/904027244263288832/y3xGGpBE.jpg"
    },
    {
        "team" : "Minnesota Vikings",
        "logo" : "https://pbs.twimg.com/profile_images/904737363112239104/AJ75RkLU_400x400.jpg"
    },
    {
        "team" : "Denver Broncos",
        "logo" : "http://prod.static.broncos.clubs.nfl.com/nfl-assets/img/gbl-ico-team/DEN/logos/home/large.png"
    },
    {
        "team" : "Detroit Lions",
        "logo" : "http://prod.static.lions.clubs.nfl.com/nfl-assets/img/gbl-ico-team/DET/logos/home/large.png"
    },
    {
        "team" : "Chicago Bears",
        "logo" : "http://is5.mzstatic.com/image/thumb/Purple118/v4/77/b2/d3/77b2d383-91f9-8658-787c-07737d61cb05/source/1200x630bb.jpg"
    },
    {
        "team" : "Green Bay Packers",
        "logo" : "http://prod.static.packers.clubs.nfl.com/nfl-assets/img/gbl-ico-team/GB/logos/home/large.png"
    },
    {
        "team" : "Indianapolis Colts",
        "logo" : "http://prod.static.colts.clubs.nfl.com/nfl-assets/img/gbl-ico-team/IND/logos/home/large.png"
    },
    {
        "team" : "Seattle Seahawks",
        "logo" : "http://cdn.bleacherreport.net/images/team_logos/328x328/seattle_seahawks.png"
    },
    {
        "team" : "Kansas City Chiefs",
        "logo" : "http://prod.static.chiefs.clubs.nfl.com/nfl-assets/img/gbl-ico-team/KC/logos/home/large.png"
    },
    {
        "team" : "Los Angeles Rams",
        "logo" : "http://prod.static.rams.clubs.nfl.com/nfl-assets/img/gbl-ico-team/LA/logos/home/large.png"
    },
    {
        "team" : "Los Angeles Chargers",
        "logo" : "http://cdn.bleacherreport.net/images/team_logos/328x328/los_angeles_chargers.png"
    },
    {
        "team" : "San Francisco 49ers",
        "logo" : "http://prod.static.49ers.clubs.nfl.com/nfl-assets/img/gbl-ico-team/SF/logos/home/large.png"
    },
    {
        "team" : "Oakland Raiders",
        "logo" : "http://prod.static.raiders.clubs.nfl.com/nfl-assets/img/gbl-ico-team/OAK/logos/home/large.png"
    },
    {
        "team" : "Arizona Cardinals",
        "logo" : "http://prod.static.cardinals.clubs.nfl.com/nfl-assets/img/gbl-ico-team/ARI/logos/home/large.png"
    },
    {
        "team" : "New Orleans Saints",
        "logo" : "http://prod.static.saints.clubs.nfl.com/nfl-assets/img/gbl-ico-team/NO/logos/home/large.png"
    },
    {
        "team" : "Dallas Cowboys",
        "logo" : "https://pbs.twimg.com/profile_images/793482426123104256/ayjBPzA1.jpg"
    },
    {
        "team" : "Houston Texans",
        "logo" : "http://prod.static.texans.clubs.nfl.com/nfl-assets/img/gbl-ico-team/HOU/logos/home/large.png"
    }
];

var positions = [
    {
        "abbreviation": "fb",
        "title": "Full Back"
    },
    {
        "abbreviation": "rb",
        "title": "Running Back"
    },
    {
        "abbreviation": "wr",
        "title": "Wide Receiver"
    },
    {
        "abbreviation": "te",
        "title": "Tight End"
    },
    {
        "abbreviation": "qb",
        "title": "Quarterback"
    },
    {
        "abbreviation": "c",
        "title": "Center"
    },
    {
        "abbreviation": "ot",
        "title": "Offensive Tackle"
    },
    {
        "abbreviation": "og",
        "title": "Offensive Guard"
    },
    {
        "abbreviation": "de",
        "title": "Defensive End"
    },
    {
        "abbreviation": "dt",
        "title": "Defensive Tackle"
    },
    {
        "abbreviation": "s",
        "title": "Safety"
    },
    {
        "abbreviation": "cb",
        "title": "Corner Back"
    },
    {
        "abbreviation": "lb",
        "title": "Linebacker"
    },
    {
        "abbreviation": "db",
        "title": "Defensive Back"
    },
    {
        "abbreviation": "ol",
        "title": "Offensive Line"
    },
    {
        "abbreviation": "dl",
        "title": "Defensive Line"
    },
    {
        "abbreviation": "p",
        "title": "Punter"
    },
    {
        "abbreviation": "k",
        "title": "Kicker"
    }
];

var newTeams = [];
var oldTeams = [];
var newPositions = [];
var oldPositions = [];
oldTeams = teams;
var refreshArray = [];
var coordinate = [];
var finalTeam;
var finalLogo;
var finalPosition;
var finalIndex;
var answer;
var color;
var step = 0;
var total_arrest_count = 870;

var start = function () {
    if (step == 0) {
        document.getElementById("quiz-box").innerHTML = "<h4 class='question'>What is your favorite subject?</h4>" +
            "<button onclick='answerZero()'>History</button>" +
            "<button onclick='answerZero()'>English</button>" +
            "<button onclick='answerOne()'>Math</button>" +
            "<button onclick='answerOne()'>Science</button>";
    }

    if (step == 1) {
        if (answer == 0) {
            for (var i = 0; i < 16; i++){
                newTeams[i] = teams[i];
                coordinate[0] = "E";
            }
        }
        if (answer == 1) {
            var x = 0;
            for (var i = 16; i < 32; i++){
                newTeams[x] = teams[i];
                coordinate[0] = "W";
                x++;
            }
        }
        step = step + 1;
    }

    if (step == 2) {
        document.getElementById("quiz-box").innerHTML = "<h4>What is your favorite type of weather?</h4>" +
            "<button onclick='answerZero()'>Snowy</button>" +
            "<button onclick='answerZero()'>Cloudy</button>" +
            "<button onclick='answerOne()'>Sunny</button>" +
            "<button onclick='answerOne()'>Rainy</button>";
    }

    if (step == 3) {
        oldTeams = newTeams;
        newTeams = refreshArray;
        if (answer == 0) {
            for (var i = 0; i < 8; i++) {
                newTeams[i] = oldTeams[i];
                coordinate[1] = "N";
            }
        }
        if (answer == 1) {
            var x = 0;
            for (var i = 8; i < 16; i++) {
                newTeams[x] = oldTeams[i];
                coordinate[1] = "S";
                x++;
            }
        }
        step++;
    }

    if (step == 4) {
        if (coordinate[0] == "E"){
            if (coordinate[1] == "N") {
                document.getElementById("quiz-box").innerHTML = "<h4>What is your favorite type of food?</h4>" +
                    "<button onclick='answerZero()'>Pizza</button>" +
                    "<button onclick='answerOne()'>SeaFood</button>" +
                    "<button onclick='answerTwo()'>Steak</button>" +
                    "<button onclick='answerThree()'>Hamburger</button>";
            }
            if (coordinate[1] == "S") {
                document.getElementById("quiz-box").innerHTML = "<h4>What is your dream vacation?</h4>" +
                    "<button onclick='answerZero()'>Caribbean</button>" +
                    "<button onclick='answerOne()'>Europe</button>" +
                    "<button onclick='answerTwo()'>Mexico</button>" +
                    "<button onclick='answerThree()'>Japan</button>";

            }
        }
        if (coordinate[0] == "W"){
            if (coordinate[1] == "N") {
                document.getElementById("quiz-box").innerHTML = "<h4>What is your favorite type of activity?</h4>" +
                    "<button onclick='answerZero()'>Hiking</button>" +
                    "<button onclick='answerOne()'>Boating</button>" +
                    "<button onclick='answerTwo()'>Watching Movies</button>" +
                    "<button onclick='answerThree()'>Hanging Out With Friends</button>";

            }
            if (coordinate[1] == "S") {
                document.getElementById("quiz-box").innerHTML = "<h4>What is your favorite type of Music?</h4>" +
                    "<button onclick='answerZero()'>Rap</button>" +
                    "<button onclick='answerOne()'>Indie</button>" +
                    "<button onclick='answerTwo()'>Country</button>" +
                    "<button onclick='answerThree()'>jazz</button>";

            }
        }
    }

    if (step == 5) {
        oldTeams = newTeams;
        newTeams = refreshArray;
        var x = 0;
        if (color == "black"){
            for (var i = 0; i < 2; i++) {
                newTeams[i] = oldTeams[i];
            }
            document.getElementById("quiz-box").innerHTML = "<h4>There is a runaway trolley barreling down the railway tracks. " +
                "Ahead, on the tracks, there are five people tied up and unable to move. " +
                "The trolley is headed straight for them. " +
                "You are standing some distance off in the train yard, next to a lever. " +
                "If you pull this lever, the trolley will switch to a different set of tracks. " +
                "However, you notice that there is one person on the side track. You have two options:</h4>" +
                "<button onclick='answerZero()'>Do nothing, and the trolley kills the five people on the main track.</button>" +
                "<button onclick='answerOne()'>Pull the lever, diverting the trolley onto the side track where it will kill one person.</button>";
        }
        if (color == "blue") {
            for (var i = 2; i < 4; i++) {
                newTeams[x] = oldTeams[i];
                x++;
            }
            document.getElementById("quiz-box").innerHTML = "<h4>If Apple designed a car, would it have Windows?</h4>" +
                "<button onclick='answerZero()'>Yes</button>" +
                "<button onclick='answerOne()'>No</button>";
        }
        if (color == "green") {
            for (var i = 4; i < 6; i++) {
                newTeams[x] = oldTeams[i];
                x++;
            }
            document.getElementById("quiz-box").innerHTML = "<img src='https://upload.wikimedia.org/wikipedia/en/a/a8/The_Dress_%28viral_phenomenon%29.png'/>" +
                "<h4>What color is the dress?</h4>" +
                "<button onclick='answerZero()'>White and Gold</button>" +
                "<button onclick='answerOne()'>Blue and Black</button>";
        }
        if (color == "red") {
            for (var i = 6; i < 8; i++) {
                newTeams[x] = oldTeams[i];
                x++;
            }
            document.getElementById("quiz-box").innerHTML = "<h4>Hi!</h4>" +
                "<button onclick='answerZero()'>ummmm....What?</button>" +
                "<button onclick='answerOne()'>Is this the question?</button>";
        }
    }

    if (step == 6) {
        if (answer == 0) {
            finalTeam = newTeams[0].team;
            finalLogo = newTeams[0].logo;
            console.log("You are playing for the " + finalTeam);
        }
        if (answer == 1) {
            finalTeam = newTeams[1].team;
            finalLogo = newTeams[1].logo;
            console.log("You are playing for the " + finalTeam);
        }
        step++;
    }

    if (step == 7) {
        document.getElementById("quiz-box").innerHTML = "<h4>Do you think OJ really did it?</h4>" +
            "<button onclick='answerZero()'>Absolutely</button>" +
            "<button onclick='answerOne()'>No way</button>" +
            "<button onclick='answerTwo()'>Who?</button>";
    }

    if (step == 8) {
        var x = 0;
        if (answer == 0) {
            for (var i = 0; i < 8; i++) {
                newPositions[i] = positions[i];
            }
            step++;
        }
        if (answer == 1) {
            for (var i = 8; i < 16; i++) {
                newPositions[x] = positions[i];
                x++;
            }
            step++;
        }
        if (answer == 2) {
            for (var i = 16; i < 18; i++) {
                newPositions[x] = positions[i];
                x++;
            }
            step += 3;
        }
    }

    if (step == 9) {
        document.getElementById("quiz-box").innerHTML = "<h4>Who would win in a battle?</h4>" +
            "<div><img class='fight-pics' src='https://2.bp.blogspot.com/-5y-57br-ax4/WFhGm8F3YOI/AAAAAAAAza0/El1L0N4GOKE1KdCooWx63KZ67U_N_bKbQCLcB/s1600/sonic-grilled-cheese.jpg'/> " +
            "<button onclick='answerZero()'>A grilled cheese sandwich</button>" +
            "<img class='fight-pics' src='https://www.tacobueno.com/assets/food/tacos/Taco_BFT_Beef_990x725.jpg'/> " +
            "<button onclick='answerOne()'>A taco</button></div>" +
            "<div><img class='fight-pics' src='http://images.mentalfloss.com/sites/default/files/31206-bobross.jpg?resize=1100x740'/> " +
            "<button onclick='answerTwo()'>Bob Ross</button>" +
            "<img class='fight-pics' src='https://www.thefix.com/sites/default/files/styles/feature/public/tinky-winky.jpeg'/> " +
            "<button onclick='answerThree()'>Tinkie Winkie</button></div>";
    }

    if (step == 10) {
        oldPositions = newPositions;
        newPositions = refreshArray;
        var x = 0;
        if (answer == 0){
            for (var i = 0; i < 2; i++){
                newPositions[i] = oldPositions[i];
            }
        }
        if (answer == 1){
            for (var i = 2; i < 4; i++){
                newPositions[x] = oldPositions[i];
                x++;
            }
        }
        if (answer == 2){
            for (var i = 4; i < 6; i++){
                newPositions[x] = oldPositions[i];
                x++;
            }
        }
        if (answer == 3){
            for (var i = 6; i < 8; i++){
                newPositions[x] = oldPositions[i];
                x++;
            }
        }
        step++;
    }

    if (step == 11) {
        document.getElementById("quiz-box").innerHTML = "<h4>Cats or Dogs?</h4>" +
            "<button onclick='answerZero()'>Dogs</button>" +
            "<button onclick='answerOne()'>Cats</button>";
    }

    if (step == 12) {
        if (answer == 0) {
            finalPosition = newPositions[0].title;
            finalIndex = newPositions[0].abbreviation;
            console.log("You are playing " + finalPosition);
        }
        if (answer == 1) {
            finalPosition = newPositions[1].title;
            finalIndex = newPositions[1].abbreviation;
            console.log("You are playing " + finalPosition);
        }
        step++;
    }

    if (step == 13) {
        document.getElementById("restart-box").innerHTML = "<button onclick=restart()>Take the quiz again!</button>";
        document.getElementById("logo-box").innerHTML = "<img class='logo' src='"+finalLogo+"'/>";
        document.getElementById("quiz-box").innerHTML = "<h4>You are playing for the " + finalTeam + " as a " + finalPosition + "!!!</h4>";
        document.getElementById("footer-box").innerHTML = "Data provided by nflarrest.com";

        var urlTotal = "http://NflArrest.com/api/v1/position";
        var urlCrimes = "http://NflArrest.com/api/v1/position/topCrimes/" + finalIndex;
        var total_arrests;
        var crime_list;

        $.ajax({
            url : urlTotal,
            dataType : "json",
            success : function(parsed_json) {
                for (var i = 0; i < 18; i++)
                {
                    if (parsed_json[i].Position == finalIndex.toUpperCase())
                    {
                        total_arrests = parsed_json[i].arrest_count;
                        console.log(total_arrests);
                    }
                }
                var crime_percent = (total_arrests / total_arrest_count);
                crime_percent = crime_percent * 100;

                document.getElementById("result-box").innerHTML = "Your position has committed " + crime_percent.toFixed(2) + "% of all NFL crimes.";

            }
        });

        $.ajax({
            url : urlCrimes,
            dataType : "json",
            success : function(parsed_json){
                var length = parsed_json.length;

                crime_list = "<ul>";
                for (var i = 0; i < parsed_json.length; i++){
                    crime_list += "<li>" + parsed_json[i].Category + " -- " + parsed_json[i].arrest_count +" arrests</li>";
                }

                crime_list += "</ul>";
                document.getElementById("crime-box").innerHTML = crime_list;
            }
        });


    }

};

var answerZero = function() {
    answer = 0;
    step = step + 1;
    color = "black";
    start();
};

var answerOne = function () {
    answer = 1;
    step = step + 1;
    color = "blue";
    start();
};

var answerTwo = function () {
    answer = 2;
    step++;
    color = "green";
    start();
};

var answerThree = function () {
    answer = 3;
    step++;
    color = "red";
    start();
};

var restart = function() {
    step = 0;
    document.getElementById("restart-box").innerHTML = "";
    document.getElementById("logo-box").innerHTML = "";
    document.getElementById("quiz-box").innerHTML = "";
    document.getElementById("result-box").innerHTML = "";
    document.getElementById("crime-box").innerHTML = "";
    document.getElementById("footer-box").innerHTML = "";
    start();
};